!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,o,a=function(e,t){return{name:e,symbol:t}},i=(r=Array(9).fill(null),{returnBoard:function(){return r},getCell:o=function(e){return r[e]},setCell:function(e,t){return null===r[e]&&(r[e]=t,!0)},winningPositions:function(){return[[o(0),o(4),o(8)],[o(2),o(4),o(6)]].concat([[o(0),o(3),o(6)],[o(1),o(4),o(7)],[o(2),o(5),o(8)]]).concat([[o(0),o(1),o(2)],[o(3),o(4),o(5)],[o(6),o(7),o(8)]])},reset:function(){r=Array(9).fill(null)}});function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c,d,s,f,m=(f=function(e,t){return e.every((function(e){return e===t&&null!==e}))},{setPlayers:function(e){var t=l(e,2);c=t[0],d=t[1]},getPlayers:function(){return[c,d]},setBoard:function(e){s=e},switchPlayers:function(){var e=c;c=d,d=e},getCurrentPlayer:function(){return c},getBoard:function(){return s},gameOver:function(){return function(){for(var e=s.winningPositions(),t=0;t<e.length;t+=1)if(f(e[t],e[t][0]))return!0;return!1}()?"W":!s.returnBoard().some((function(e){return null===e}))&&"D"}});function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=document.querySelector(".container"),g=function(e){var t=p(e,2),n=t[0],r=t[1],o=a(n,"X"),i=a(r,"O");m.setPlayers([o,i])},S=function(e,t){t.forEach((function(t){e.removeChild(t)}))},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelectorAll(".cell");!1===t&&g(e),m.setBoard(i),x(n)},E=function(){var e=document.querySelector(".container"),t=document.querySelector("#grid");t.classList.add("h-600");for(var n=0;n<=8;n+=1){var r=document.createElement("div");r.id=n,r.className="cell col s4",t.appendChild(r)}e.classList.add("pt-4"),e.appendChild(t)},L=function(e){var t=document.createElement("div");t.id="player_turn",e.appendChild(t)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector("#grid");L(t);var n=document.querySelectorAll(".cell");t.classList.remove("teal","card-panel","z-depth-2","player-wrapper","flex-col"),e&&S(t,e),[0,3].forEach((function(e){return n[e].classList.add("first")})),[2,5].forEach((function(e){return n[e].classList.add("last")})),n[6].classList.add("first"),n[8].classList.add("last")},P=function(e){!function(e){e.addEventListener("submit",(function(t){t.preventDefault();var n=y(e.elements).slice(0,2).map((function(e){return e.value}));E();var r=document.querySelector("form"),o=document.querySelector("#title");w([r,o]),C(n)}))}(function(e){var t=document.querySelector("#grid"),n=document.querySelector("#title"),r=document.createElement("form"),o=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),l=document.createElement("input");return e.addEventListener("click",(function(){t.classList.add("player-wrapper"),t.removeChild(e),r.className="col s12",n.textContent="Enter your names:",o.className="row",a.className="input-field col s12",i.className="input-field col s12",l.type="submit",l.className="btn teal",l.id="submit",l.value="PLAY",a.innerHTML='<input id="x_name" placeholder="Name of Player X" value="Player X" type="text" class="validate">',i.innerHTML='<input id="o_name" placeholder="Name of Player O" value="Player O" type="text" class="validate">',o.appendChild(a),o.appendChild(i),o.appendChild(l),r.appendChild(o),t.appendChild(r)})),r}(e))},q=function(e){!function(e){var t=document.createElement("div"),n=document.createElement("h2"),r=document.createElement("button");t.classList.add("row"),t.id="grid",t.classList.add("card-panel"),t.classList.add("teal","lighten-4","z-depth-2","h-600","flex-col"),n.innerHTML="Welcome,<br><br>Click below to start",n.id="title",n.className="white-txt",r.className="btn",r.innerHTML="Start",r.id="start",t.appendChild(n),t.appendChild(r),e.appendChild(t),P(r)}(e)},A=function(){var e=document.querySelector("#grid"),t=function(e){var t=document.querySelector("h2"),n=document.createElement("h3");n.innerText="Would you like to play again?";var r=document.createElement("input"),o=document.createElement("input"),a=document.createElement("div");return a.className="btn-div",r.type="submit",r.id="yes",r.value="Yes",r.className="play-btn btn",o.type="submit",o.id="no",o.value="No",o.className="play-btn btn",e.appendChild(n),a.appendChild(r),a.appendChild(o),e.appendChild(a),[t,n,a]}(e),n=document.querySelector("#yes"),r=document.querySelector("#no");n.addEventListener("click",(function(){S(e,t),E(),w(),C([],!0)})),r.addEventListener("click",(function(){!function(){var e=document.querySelector(".container"),t=document.querySelector("#grid");S(e,[t]),q(e)}()}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector("#grid");t.removeChild(document.querySelector("#player_turn")),t.classList.add("teal","z-depth-2","h-600","flex-col");var n=document.createElement("h2");n.innerHTML=e?"The winner is ".concat(e):"It's a draw!",n.classList.add("white-txt"),t.appendChild(n)},j=function(e,t){e.innerHTML="<h4>It is ".concat(t,"'s turn.</h4>")},x=function(e){var t=document.querySelector("#player_turn");j(t,m.getCurrentPlayer().name),e.forEach((function(e){return e.addEventListener("click",(function(){if(m.getBoard().setCell(this.id,m.getCurrentPlayer().symbol)){this.innerHTML="O"===(n=m.getCurrentPlayer().symbol)?'<i class="material-icons symbol">radio_button_unchecked</i>':"X"===n?'<i class="material-icons symbol">clear</i>':void 0;var e=m.gameOver();e&&(!function(){var e=document.querySelector("#grid");document.querySelectorAll(".cell").forEach((function(t){return e.removeChild(t)}))}(),"W"===e?O(m.getCurrentPlayer().name):O(),m.getBoard().reset(),A()),e||(m.switchPlayers(),j(t,m.getCurrentPlayer().name))}var n}))}))};q(b)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvcGxheWVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb21wb25lbnRzL2JvYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb21wb25lbnRzL2dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJncmlkIiwiZ2V0Q2VsbCIsInBsYXllckZhY3RvcnkiLCJzeW1ib2wiLCJib2FyZCIsIkFycmF5IiwiZmlsbCIsInJldHVybkJvYXJkIiwiaW5kZXgiLCJzZXRDZWxsIiwid2lubmluZ1Bvc2l0aW9ucyIsImNvbmNhdCIsInJlc2V0IiwiY3VycmVudFBsYXllciIsIm90aGVyUGxheWVyIiwiZ2FtZWJvYXJkIiwiaXNBbGxFcXVhbCIsImdhbWUiLCJ2YWwiLCJldmVyeSIsIml0ZW0iLCJzZXRQbGF5ZXJzIiwicGxheWVycyIsImdldFBsYXllcnMiLCJzZXRCb2FyZCIsInN3aXRjaFBsYXllcnMiLCJ0ZW1wIiwiZ2V0Q3VycmVudFBsYXllciIsImdldEJvYXJkIiwiZ2FtZU92ZXIiLCJwb3NpdGlvbnNBcnIiLCJsZW5ndGgiLCJpc1dpbm5lciIsInNvbWUiLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwbGF5ZXJYTmFtZSIsInBsYXllck9OYW1lIiwicGxheWVyWCIsInBsYXllck8iLCJyZW1vdmVIZWxwZXIiLCJwYXJlbnQiLCJjaGlsZHJlbiIsImZvckVhY2giLCJjaGlsZCIsInJlbW92ZUNoaWxkIiwicGxheSIsInJlcGxheSIsImNlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsImNoYW5nZUNlbGxzIiwiY3JlYXRlR3JpZERPTSIsInJvb3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJjZWxsIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJkcmF3UGxheWVyVHVybiIsInBsYXllclR1cm5EaXYiLCJkcmF3R3JpZCIsInJlbW92ZSIsImdldFN0YXJ0ZWQiLCJzdGFydCIsImZvcm0iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZWxlbWVudHMiLCJzbGljZSIsIm1hcCIsImVsZW0iLCJjcmVhdGVkRm9ybSIsInRpdGxlIiwiZXZlbnRMaXN0ZW5lciIsIm1haW5Sb3ciLCJzdWJSb3ciLCJpbnB1dFgiLCJpbnB1dE8iLCJpbnB1dCIsInRleHRDb250ZW50IiwidHlwZSIsImlubmVySFRNTCIsImNyZWF0ZVBsYXllckZvcm0iLCJyZW5kZXIiLCJyb3ciLCJoMiIsInN0YXJ0QnRuIiwic3RhcnRTY3JlZW4iLCJhc2tSZW1hdGNoIiwiY3JlYXRlZEVsZW1lbnRzIiwicmVzdWx0TXNnIiwicXVlc3Rpb24iLCJpbm5lclRleHQiLCJpbnB1dDIiLCJidG5EaXYiLCJjcmVhdGVBc2tSZW1hdGNoRG9tIiwieWVzIiwibm8iLCJkaXNwbGF5UmVzdWx0Iiwid2lubmVyIiwic2V0UGxheWVyVHVybiIsImRpdiIsInBsYXllciIsInRoaXMiLCJyZW1vdmVHcmlkIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FB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QU03QixFQUFPbUMsU0FBU0MsY0FBYyxTQUN0QkQsU0FBU2UsaUJBQWlCLFNBQ2xDTixTQUFRLFNBQUNZLEdBQUQsT0FBVXhELEVBQUs4QyxZQUFZVSxNQVduQ29ELEdBQ2lCLE1BQWIvRSxFQUNGeUUsRUFBY3JGLEVBQUtVLG1CQUFtQnBELE1BRXRDK0gsSUFFRnJGLEVBQUtXLFdBQVdoQixRQUNoQmdGLEtBRUcvRCxJQUNIWixFQUFLUSxnQkFDTCtFLEVBQWMxQyxFQUFlN0MsRUFBS1UsbUJBQW1CcEQsT0F2TzNDLElBQUM0QixTQTZPbkJvRixFQUFPckQiLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IHBsYXllckZhY3RvcnkgPSAobmFtZSwgc3ltYm9sKSA9PiAoeyBuYW1lLCBzeW1ib2wgfSk7XG5leHBvcnQgZGVmYXVsdCBwbGF5ZXJGYWN0b3J5O1xuIiwiY29uc3QgYm9hcmQgPSAoKCkgPT4ge1xuICBsZXQgZ3JpZCA9IEFycmF5KDkpLmZpbGwobnVsbCk7XG5cbiAgY29uc3QgcmV0dXJuQm9hcmQgPSAoKSA9PiBncmlkO1xuXG4gIGNvbnN0IGdldENlbGwgPSAoaW5kZXgpID0+IGdyaWRbaW5kZXhdO1xuXG4gIGNvbnN0IHNldENlbGwgPSAoaW5kZXgsIHZhbHVlKSA9PiB7XG4gICAgaWYgKGdyaWRbaW5kZXhdID09PSBudWxsKSB7XG4gICAgICBncmlkW2luZGV4XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBjb25zdCByZXNldCA9ICgpID0+IHtcbiAgICBncmlkID0gQXJyYXkoOSkuZmlsbChudWxsKTtcbiAgfTtcblxuICBjb25zdCBkaWFnb25hbHMgPSAoKSA9PiB7XG4gICAgY29uc3QgdG9wbGVmdCA9IFtnZXRDZWxsKDApLCBnZXRDZWxsKDQpLCBnZXRDZWxsKDgpXTtcbiAgICBjb25zdCB0b3ByaWdodCA9IFtnZXRDZWxsKDIpLCBnZXRDZWxsKDQpLCBnZXRDZWxsKDYpXTtcbiAgICByZXR1cm4gW3RvcGxlZnQsIHRvcHJpZ2h0XTtcbiAgfTtcblxuICBjb25zdCByb3dzID0gKCkgPT4ge1xuICAgIGNvbnN0IGZpcnN0ID0gW2dldENlbGwoMCksIGdldENlbGwoMSksIGdldENlbGwoMildO1xuICAgIGNvbnN0IHNlY29uZCA9IFtnZXRDZWxsKDMpLCBnZXRDZWxsKDQpLCBnZXRDZWxsKDUpXTtcbiAgICBjb25zdCB0aGlyZCA9IFtnZXRDZWxsKDYpLCBnZXRDZWxsKDcpLCBnZXRDZWxsKDgpXTtcbiAgICByZXR1cm4gW2ZpcnN0LCBzZWNvbmQsIHRoaXJkXTtcbiAgfTtcblxuICBjb25zdCBjb2x1bW5zID0gKCkgPT4ge1xuICAgIGNvbnN0IGZpcnN0ID0gW2dldENlbGwoMCksIGdldENlbGwoMyksIGdldENlbGwoNildO1xuICAgIGNvbnN0IHNlY29uZCA9IFtnZXRDZWxsKDEpLCBnZXRDZWxsKDQpLCBnZXRDZWxsKDcpXTtcbiAgICBjb25zdCB0aGlyZCA9IFtnZXRDZWxsKDIpLCBnZXRDZWxsKDUpLCBnZXRDZWxsKDgpXTtcbiAgICByZXR1cm4gW2ZpcnN0LCBzZWNvbmQsIHRoaXJkXTtcbiAgfTtcblxuICBjb25zdCB3aW5uaW5nUG9zaXRpb25zID0gKCkgPT4ge1xuICAgIGNvbnN0IHBvc2l0aW9ucyA9IGRpYWdvbmFscygpLmNvbmNhdChjb2x1bW5zKCkpLmNvbmNhdChyb3dzKCkpO1xuICAgIHJldHVybiBwb3NpdGlvbnM7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICByZXR1cm5Cb2FyZCxcbiAgICBnZXRDZWxsLFxuICAgIHNldENlbGwsXG4gICAgd2lubmluZ1Bvc2l0aW9ucyxcbiAgICByZXNldCxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGJvYXJkO1xuIiwiY29uc3QgZ2FtZSA9ICgoKSA9PiB7XG4gIGxldCBjdXJyZW50UGxheWVyO1xuICBsZXQgb3RoZXJQbGF5ZXI7XG4gIGxldCBnYW1lYm9hcmQ7XG5cbiAgY29uc3Qgc2V0UGxheWVycyA9IChwbGF5ZXJzKSA9PiB7XG4gICAgW2N1cnJlbnRQbGF5ZXIsIG90aGVyUGxheWVyXSA9IHBsYXllcnM7XG4gIH07XG5cbiAgY29uc3QgZ2V0UGxheWVycyA9ICgpID0+IFtjdXJyZW50UGxheWVyLCBvdGhlclBsYXllcl07XG5cbiAgY29uc3Qgc2V0Qm9hcmQgPSAoYm9hcmQpID0+IHsgZ2FtZWJvYXJkID0gYm9hcmQ7IH07XG5cbiAgY29uc3Qgc3dpdGNoUGxheWVycyA9ICgpID0+IHtcbiAgICBjb25zdCB0ZW1wID0gY3VycmVudFBsYXllcjtcbiAgICBjdXJyZW50UGxheWVyID0gb3RoZXJQbGF5ZXI7XG4gICAgb3RoZXJQbGF5ZXIgPSB0ZW1wO1xuICB9O1xuXG4gIGNvbnN0IGdldEN1cnJlbnRQbGF5ZXIgPSAoKSA9PiBjdXJyZW50UGxheWVyO1xuXG4gIGNvbnN0IGdldEJvYXJkID0gKCkgPT4gZ2FtZWJvYXJkO1xuXG4gIGNvbnN0IGlzQWxsRXF1YWwgPSAod2lubmluZ1Bvc2l0aW9ucywgdmFsKSA9PiB3aW5uaW5nUG9zaXRpb25zLmV2ZXJ5KFxuICAgIChpdGVtKSA9PiBpdGVtID09PSB2YWwgJiYgaXRlbSAhPT0gbnVsbCxcbiAgKTtcblxuICBjb25zdCBpc1dpbm5lciA9ICgpID0+IHtcbiAgICBjb25zdCBwb3NpdGlvbnNBcnIgPSBnYW1lYm9hcmQud2lubmluZ1Bvc2l0aW9ucygpO1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwb3NpdGlvbnNBcnIubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICBpZiAoaXNBbGxFcXVhbChwb3NpdGlvbnNBcnJbaW5kZXhdLCBwb3NpdGlvbnNBcnJbaW5kZXhdWzBdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGlzRHJhdyA9ICgpID0+IHtcbiAgICBpZiAoZ2FtZWJvYXJkLnJldHVybkJvYXJkKCkuc29tZSgoaXRlbSkgPT4gaXRlbSA9PT0gbnVsbCkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCBnYW1lT3ZlciA9ICgpID0+IHtcbiAgICBpZiAoaXNXaW5uZXIoKSkgcmV0dXJuICdXJztcbiAgICBpZiAoaXNEcmF3KCkpIHJldHVybiAnRCc7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2V0UGxheWVycyxcbiAgICBnZXRQbGF5ZXJzLFxuICAgIHNldEJvYXJkLFxuICAgIHN3aXRjaFBsYXllcnMsXG4gICAgZ2V0Q3VycmVudFBsYXllcixcbiAgICBnZXRCb2FyZCxcbiAgICBnYW1lT3ZlcixcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWU7XG4iLCJpbXBvcnQgcGxheWVyRmFjdG9yeSBmcm9tICcuL2NvbXBvbmVudHMvcGxheWVyLmpzJztcbmltcG9ydCBib2FyZCBmcm9tICcuL2NvbXBvbmVudHMvYm9hcmQuanMnO1xuaW1wb3J0IGdhbWUgZnJvbSAnLi9jb21wb25lbnRzL2dhbWUuanMnO1xuXG5jb25zdCB4U3ltID0gJ1gnO1xuY29uc3Qgb1N5bSA9ICdPJztcbmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcblxuY29uc3Qgc2V0UGxheWVycyA9IChwbGF5ZXJzKSA9PiB7XG4gIGNvbnN0IFtwbGF5ZXJYTmFtZSwgcGxheWVyT05hbWVdID0gcGxheWVycztcbiAgY29uc3QgcGxheWVyWCA9IHBsYXllckZhY3RvcnkocGxheWVyWE5hbWUsIHhTeW0pO1xuICBjb25zdCBwbGF5ZXJPID0gcGxheWVyRmFjdG9yeShwbGF5ZXJPTmFtZSwgb1N5bSk7XG4gIGdhbWUuc2V0UGxheWVycyhbcGxheWVyWCwgcGxheWVyT10pO1xufTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG5jb25zdCBnZXRTeW1ib2wgPSAoc3ltYm9sKSA9PiB7XG4gIGlmIChzeW1ib2wgPT09ICdPJykgcmV0dXJuICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIHN5bWJvbFwiPnJhZGlvX2J1dHRvbl91bmNoZWNrZWQ8L2k+JztcbiAgaWYgKHN5bWJvbCA9PT0gJ1gnKSByZXR1cm4gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgc3ltYm9sXCI+Y2xlYXI8L2k+Jztcbn07XG5cbmNvbnN0IHJlbW92ZUhlbHBlciA9IChwYXJlbnQsIGNoaWxkcmVuKSA9PiB7XG4gIGNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfSk7XG59O1xuXG5jb25zdCBwbGF5ID0gKHBsYXllcnMsIHJlcGxheSA9IGZhbHNlKSA9PiB7XG4gIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcbiAgaWYgKHJlcGxheSA9PT0gZmFsc2UpIHtcbiAgICBzZXRQbGF5ZXJzKHBsYXllcnMpO1xuICB9XG4gIGdhbWUuc2V0Qm9hcmQoYm9hcmQpO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgY2hhbmdlQ2VsbHMoY2VsbHMpO1xufTtcblxuY29uc3QgY3JlYXRlR3JpZERPTSA9ICgpID0+IHtcbiAgY29uc3Qgcm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgY29uc3QgY2VsbHMgPSA4O1xuICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dyaWQnKTtcbiAgZ3JpZC5jbGFzc0xpc3QuYWRkKCdoLTYwMCcpO1xuXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPD0gY2VsbHM7IGluZGV4ICs9IDEpIHtcbiAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY2VsbC5pZCA9IGluZGV4O1xuICAgIGNlbGwuY2xhc3NOYW1lID0gJ2NlbGwgY29sIHM0JztcbiAgICBncmlkLmFwcGVuZENoaWxkKGNlbGwpO1xuICB9XG4gIHJvb3QuY2xhc3NMaXN0LmFkZCgncHQtNCcpO1xuICByb290LmFwcGVuZENoaWxkKGdyaWQpO1xufTtcblxuXG5jb25zdCBkcmF3UGxheWVyVHVybiA9IChncmlkKSA9PiB7XG4gIGNvbnN0IHBsYXllclR1cm5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcGxheWVyVHVybkRpdi5pZCA9ICdwbGF5ZXJfdHVybic7XG4gIGdyaWQuYXBwZW5kQ2hpbGQocGxheWVyVHVybkRpdik7XG59O1xuXG5jb25zdCBkcmF3R3JpZCA9IChjaGlsZHJlbiA9IG51bGwpID0+IHtcbiAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNncmlkJyk7XG4gIGRyYXdQbGF5ZXJUdXJuKGdyaWQpO1xuICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJyk7XG4gIGdyaWQuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAndGVhbCcsXG4gICAgJ2NhcmQtcGFuZWwnLFxuICAgICd6LWRlcHRoLTInLFxuICAgICdwbGF5ZXItd3JhcHBlcicsXG4gICAgJ2ZsZXgtY29sJyxcbiAgKTtcbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgcmVtb3ZlSGVscGVyKGdyaWQsIGNoaWxkcmVuKTtcbiAgfVxuICBbMCwgM10uZm9yRWFjaCgoaSkgPT4gY2VsbHNbaV0uY2xhc3NMaXN0LmFkZCgnZmlyc3QnKSk7XG4gIFsyLCA1XS5mb3JFYWNoKChpKSA9PiBjZWxsc1tpXS5jbGFzc0xpc3QuYWRkKCdsYXN0JykpO1xuICBjZWxsc1s2XS5jbGFzc0xpc3QuYWRkKCdmaXJzdCcpO1xuICBjZWxsc1s4XS5jbGFzc0xpc3QuYWRkKCdsYXN0Jyk7XG59O1xuXG5jb25zdCBnZXRQbGF5ZXJzID0gKGZvcm0pID0+IHtcbiAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBwbGF5ZXJzID0gWy4uLmZvcm0uZWxlbWVudHNdLnNsaWNlKDAsIDIpLm1hcCgoZWxlbSkgPT4gZWxlbS52YWx1ZSk7XG4gICAgY3JlYXRlR3JpZERPTSgpO1xuICAgIGNvbnN0IGNyZWF0ZWRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJyk7XG4gICAgZHJhd0dyaWQoW2NyZWF0ZWRGb3JtLCB0aXRsZV0pO1xuICAgIHBsYXkocGxheWVycyk7XG4gIH0pO1xufTtcblxuXG5jb25zdCBjcmVhdGVQbGF5ZXJGb3JtID0gKGV2ZW50TGlzdGVuZXIpID0+IHtcbiAgY29uc3QgbWFpblJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNncmlkJyk7XG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJyk7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gIGNvbnN0IHN1YlJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCBpbnB1dFggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3QgaW5wdXRPID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgZXZlbnRMaXN0ZW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBtYWluUm93LmNsYXNzTGlzdC5hZGQoJ3BsYXllci13cmFwcGVyJyk7XG4gICAgbWFpblJvdy5yZW1vdmVDaGlsZChldmVudExpc3RlbmVyKTtcbiAgICBmb3JtLmNsYXNzTmFtZSA9ICdjb2wgczEyJztcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9ICdFbnRlciB5b3VyIG5hbWVzOic7XG4gICAgc3ViUm93LmNsYXNzTmFtZSA9ICdyb3cnO1xuICAgIGlucHV0WC5jbGFzc05hbWUgPSAnaW5wdXQtZmllbGQgY29sIHMxMic7XG4gICAgaW5wdXRPLmNsYXNzTmFtZSA9ICdpbnB1dC1maWVsZCBjb2wgczEyJztcbiAgICBpbnB1dC50eXBlID0gJ3N1Ym1pdCc7XG4gICAgaW5wdXQuY2xhc3NOYW1lID0gJ2J0biB0ZWFsJztcbiAgICBpbnB1dC5pZCA9ICdzdWJtaXQnO1xuICAgIGlucHV0LnZhbHVlID0gJ1BMQVknO1xuICAgIGlucHV0WC5pbm5lckhUTUwgPSAnPGlucHV0IGlkPVwieF9uYW1lXCIgcGxhY2Vob2xkZXI9XCJOYW1lIG9mIFBsYXllciBYXCIgdmFsdWU9XCJQbGF5ZXIgWFwiIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2YWxpZGF0ZVwiPic7XG4gICAgaW5wdXRPLmlubmVySFRNTCA9ICc8aW5wdXQgaWQ9XCJvX25hbWVcIiBwbGFjZWhvbGRlcj1cIk5hbWUgb2YgUGxheWVyIE9cIiB2YWx1ZT1cIlBsYXllciBPXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cInZhbGlkYXRlXCI+JztcbiAgICBzdWJSb3cuYXBwZW5kQ2hpbGQoaW5wdXRYKTtcbiAgICBzdWJSb3cuYXBwZW5kQ2hpbGQoaW5wdXRPKTtcbiAgICBzdWJSb3cuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoc3ViUm93KTtcbiAgICBtYWluUm93LmFwcGVuZENoaWxkKGZvcm0pO1xuICB9KTtcbiAgcmV0dXJuIGZvcm07XG59O1xuXG5jb25zdCBnZXRTdGFydGVkID0gKHN0YXJ0KSA9PiB7XG4gIGNvbnN0IGZvcm0gPSBjcmVhdGVQbGF5ZXJGb3JtKHN0YXJ0KTtcbiAgZ2V0UGxheWVycyhmb3JtKTtcbn07XG5cbmNvbnN0IHN0YXJ0U2NyZWVuID0gKHJvb3QpID0+IHtcbiAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgY29uc3Qgc3RhcnRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgcm93LmNsYXNzTGlzdC5hZGQoJ3JvdycpO1xuICByb3cuaWQgPSAnZ3JpZCc7XG4gIHJvdy5jbGFzc0xpc3QuYWRkKCdjYXJkLXBhbmVsJyk7XG4gIHJvdy5jbGFzc0xpc3QuYWRkKCd0ZWFsJywgJ2xpZ2h0ZW4tNCcsICd6LWRlcHRoLTInLCAnaC02MDAnLCAnZmxleC1jb2wnKTtcbiAgaDIuaW5uZXJIVE1MID0gJ1dlbGNvbWUsPGJyPjxicj5DbGljayBiZWxvdyB0byBzdGFydCc7XG4gIGgyLmlkID0gJ3RpdGxlJztcbiAgaDIuY2xhc3NOYW1lID0gJ3doaXRlLXR4dCc7XG4gIHN0YXJ0QnRuLmNsYXNzTmFtZSA9ICdidG4nO1xuICBzdGFydEJ0bi5pbm5lckhUTUwgPSAnU3RhcnQnO1xuICBzdGFydEJ0bi5pZCA9ICdzdGFydCc7XG4gIHJvdy5hcHBlbmRDaGlsZChoMik7XG4gIHJvdy5hcHBlbmRDaGlsZChzdGFydEJ0bik7XG4gIHJvb3QuYXBwZW5kQ2hpbGQocm93KTtcbiAgZ2V0U3RhcnRlZChzdGFydEJ0bik7XG59O1xuXG5jb25zdCByZW5kZXIgPSAocm9vdCkgPT4ge1xuICBzdGFydFNjcmVlbihyb290KTtcbn07XG5cbmNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ3JpZCcpO1xuICByZW1vdmVIZWxwZXIoY29udGFpbmVyLCBbZ3JpZF0pO1xuICByZW5kZXIoY29udGFpbmVyKTtcbn07XG5cbmNvbnN0IGNyZWF0ZUFza1JlbWF0Y2hEb20gPSAoZ3JpZCkgPT4ge1xuICBjb25zdCByZXN1bHRNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoMicpO1xuICBjb25zdCBxdWVzdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG5cbiAgcXVlc3Rpb24uaW5uZXJUZXh0ID0gJ1dvdWxkIHlvdSBsaWtlIHRvIHBsYXkgYWdhaW4/JztcbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBjb25zdCBpbnB1dDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBjb25zdCBidG5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgYnRuRGl2LmNsYXNzTmFtZSA9ICdidG4tZGl2JztcbiAgaW5wdXQudHlwZSA9ICdzdWJtaXQnO1xuICBpbnB1dC5pZCA9ICd5ZXMnO1xuICBpbnB1dC52YWx1ZSA9ICdZZXMnO1xuICBpbnB1dC5jbGFzc05hbWUgPSAncGxheS1idG4gYnRuJztcbiAgaW5wdXQyLnR5cGUgPSAnc3VibWl0JztcbiAgaW5wdXQyLmlkID0gJ25vJztcbiAgaW5wdXQyLnZhbHVlID0gJ05vJztcbiAgaW5wdXQyLmNsYXNzTmFtZSA9ICdwbGF5LWJ0biBidG4nO1xuICBncmlkLmFwcGVuZENoaWxkKHF1ZXN0aW9uKTtcbiAgYnRuRGl2LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgYnRuRGl2LmFwcGVuZENoaWxkKGlucHV0Mik7XG4gIGdyaWQuYXBwZW5kQ2hpbGQoYnRuRGl2KTtcbiAgcmV0dXJuIFtyZXN1bHRNc2csIHF1ZXN0aW9uLCBidG5EaXZdO1xufTtcblxuY29uc3QgcmVtYXRjaCA9ICgpID0+IHtcbiAgY3JlYXRlR3JpZERPTSgpO1xuICBkcmF3R3JpZCgpO1xuICBwbGF5KFtdLCB0cnVlKTtcbn07XG5cbmNvbnN0IGFza1JlbWF0Y2ggPSAoKSA9PiB7XG4gIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ3JpZCcpO1xuICBjb25zdCBjcmVhdGVkRWxlbWVudHMgPSBjcmVhdGVBc2tSZW1hdGNoRG9tKGdyaWQpO1xuICBjb25zdCB5ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjeWVzJyk7XG4gIGNvbnN0IG5vID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25vJyk7XG4gIHllcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICByZW1vdmVIZWxwZXIoZ3JpZCwgY3JlYXRlZEVsZW1lbnRzKTtcbiAgICByZW1hdGNoKCk7XG4gIH0pO1xuICBuby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICByZXNldCgpO1xuICB9KTtcbn07XG5cbmNvbnN0IGRpc3BsYXlSZXN1bHQgPSAod2lubmVyID0gbnVsbCkgPT4ge1xuICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dyaWQnKTtcbiAgZ3JpZC5yZW1vdmVDaGlsZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheWVyX3R1cm4nKSk7XG4gIGdyaWQuY2xhc3NMaXN0LmFkZCgndGVhbCcsICd6LWRlcHRoLTInLCAnaC02MDAnLCAnZmxleC1jb2wnKTtcbiAgY29uc3QgaDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICBpZiAod2lubmVyKSB7XG4gICAgaDIuaW5uZXJIVE1MID0gYFRoZSB3aW5uZXIgaXMgJHt3aW5uZXJ9YDtcbiAgfSBlbHNlIHtcbiAgICBoMi5pbm5lckhUTUwgPSBcIkl0J3MgYSBkcmF3IVwiO1xuICB9XG4gIGgyLmNsYXNzTGlzdC5hZGQoJ3doaXRlLXR4dCcpO1xuICBncmlkLmFwcGVuZENoaWxkKGgyKTtcbn07XG5cbmNvbnN0IHNldFBsYXllclR1cm4gPSAoZGl2LCBwbGF5ZXIpID0+IHtcbiAgZGl2LmlubmVySFRNTCA9IGA8aDQ+SXQgaXMgJHtwbGF5ZXJ9J3MgdHVybi48L2g0PmA7XG59O1xuXG5jb25zdCByZW1vdmVHcmlkID0gKCkgPT4ge1xuICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dyaWQnKTtcbiAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpO1xuICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiBncmlkLnJlbW92ZUNoaWxkKGNlbGwpKTtcbn07XG5cbmNvbnN0IGNoYW5nZUNlbGxzID0gKGNlbGxzKSA9PiB7XG4gIGNvbnN0IHBsYXllclR1cm5EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheWVyX3R1cm4nKTtcbiAgc2V0UGxheWVyVHVybihwbGF5ZXJUdXJuRGl2LCBnYW1lLmdldEN1cnJlbnRQbGF5ZXIoKS5uYW1lKTtcbiAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4gY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZ2FtZS5nZXRCb2FyZCgpLnNldENlbGwodGhpcy5pZCwgZ2FtZS5nZXRDdXJyZW50UGxheWVyKCkuc3ltYm9sKSkge1xuICAgICAgdGhpcy5pbm5lckhUTUwgPSBnZXRTeW1ib2woZ2FtZS5nZXRDdXJyZW50UGxheWVyKCkuc3ltYm9sKTtcbiAgICAgIGNvbnN0IGdhbWVPdmVyID0gZ2FtZS5nYW1lT3ZlcigpO1xuICAgICAgaWYgKGdhbWVPdmVyKSB7XG4gICAgICAgIHJlbW92ZUdyaWQoKTtcbiAgICAgICAgaWYgKGdhbWVPdmVyID09PSAnVycpIHtcbiAgICAgICAgICBkaXNwbGF5UmVzdWx0KGdhbWUuZ2V0Q3VycmVudFBsYXllcigpLm5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlSZXN1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBnYW1lLmdldEJvYXJkKCkucmVzZXQoKTtcbiAgICAgICAgYXNrUmVtYXRjaCgpO1xuICAgICAgfVxuICAgICAgaWYgKCFnYW1lT3Zlcikge1xuICAgICAgICBnYW1lLnN3aXRjaFBsYXllcnMoKTtcbiAgICAgICAgc2V0UGxheWVyVHVybihwbGF5ZXJUdXJuRGl2LCBnYW1lLmdldEN1cnJlbnRQbGF5ZXIoKS5uYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pKTtcbn07XG5cbnJlbmRlcihjb250YWluZXIpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==